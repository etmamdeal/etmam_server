# توثيق واجهة برمجة التطبيق (API)

## المسارات العامة

### الصفحة الرئيسية
- المسار: `/`
- الطريقة: `GET`
- الوصف: عرض الصفحة الرئيسية للموقع

### تسجيل الدخول
- المسار: `/client-login`
- الطريقة: `POST`
- المعلومات المطلوبة:
  - username: اسم المستخدم
  - password: كلمة المرور
- الاستجابة: توجيه إلى لوحة التحكم في حالة النجاح

## مسارات المشرفين

### لوحة تحكم المشرف
- المسار: `/admin`
- الطريقة: `GET`
- الصلاحيات المطلوبة: `Permission.VIEW_DASHBOARD`
- الوصف: عرض لوحة تحكم المشرف مع الإحصائيات والبيانات

### إدارة السكربتات
- المسار: `/manage_scripts`
- الطريقة: `GET`
- الصلاحيات المطلوبة: `Permission.MANAGE_SCRIPTS`
- الوصف: عرض قائمة السكربتات وإدارتها

### إضافة سكربت
- المسار: `/add_script`
- الطريقة: `POST`
- الصلاحيات المطلوبة: `Permission.MANAGE_SCRIPTS`
- المعلومات المطلوبة:
  - name: اسم السكربت
  - description: وصف السكربت
  - code: كود السكربت

## مسارات المستخدمين

### لوحة تحكم المستخدم
- المسار: `/client_dashboard`
- الطريقة: `GET`
- الوصف: عرض لوحة تحكم المستخدم مع السكربتات المتاحة

### تشغيل سكربت
- المسار: `/run_script/<script_id>`
- الطريقة: `POST`
- الوصف: تنفيذ سكربت محدد

## نظام الصلاحيات

### أدوار المستخدمين
- `Role.SUPER_ADMIN`: مدير النظام
- `Role.ADMIN`: مشرف
- `Role.USER`: مستخدم عادي

### الصلاحيات المتاحة
- `Permission.MANAGE_USERS`: إدارة المستخدمين
- `Permission.MANAGE_SCRIPTS`: إدارة السكربتات
- `Permission.VIEW_LOGS`: عرض السجلات
- `Permission.VIEW_DASHBOARD`: عرض لوحة التحكم

## التعامل مع الأخطاء

### رموز الاستجابة
- 200: نجاح العملية
- 400: خطأ في الطلب
- 403: غير مصرح
- 404: الصفحة غير موجودة
- 500: خطأ في الخادم

### رسائل الخطأ
يتم إرجاع رسائل الخطأ بالتنسيق التالي:
```json
{
    "error": "وصف الخطأ",
    "status": "error"
}
```

## أمثلة على الاستخدام

### تسجيل الدخول
```python
response = requests.post('/client-login', data={
    'username': 'test_user',
    'password': 'password123'
})
```

### إضافة سكربت
```python
response = requests.post('/add_script', data={
    'name': 'test_script',
    'description': 'وصف السكربت',
    'code': 'print("Hello")'
}, headers={'Authorization': 'Bearer token'})
``` 